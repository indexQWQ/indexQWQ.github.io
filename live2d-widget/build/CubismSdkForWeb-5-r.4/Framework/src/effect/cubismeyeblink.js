import{csmVector}from"../type/csmvector";class CubismEyeBlink{static create(e=null){return new CubismEyeBlink(e)}static delete(e){}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(t,e){this._userTimeSeconds+=e;let i,s=0;switch(this._blinkingState){case EyeState.EyeState_Closing:1<=(s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)&&(s=1,this._blinkingState=EyeState.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),i=1-s;break;case EyeState.EyeState_Closed:1<=(s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)&&(this._blinkingState=EyeState.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),i=0;break;case EyeState.EyeState_Opening:1<=(s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)&&(s=1,this._blinkingState=EyeState.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),i=s;break;case EyeState.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=EyeState.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),i=1;break;default:this._blinkingState=EyeState.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),i=1}CubismEyeBlink.CloseIfZero||(i=-i);for(let e=0;e<this._parameterIds.getSize();++e)t.setParameterValueById(this._parameterIds.at(e),i)}constructor(t){if(this._blinkingState=EyeState.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new csmVector,null!=t)for(let e=0;e<t.getEyeBlinkParameterCount();++e)this._parameterIds.pushBack(t.getEyeBlinkParameterId(e))}determinNextBlinkingTiming(){var e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}}var EyeState,Live2DCubismFramework;CubismEyeBlink.CloseIfZero=!0,(e=>{e[e.EyeState_First=0]="EyeState_First",e[e.EyeState_Interval=1]="EyeState_Interval",e[e.EyeState_Closing=2]="EyeState_Closing",e[e.EyeState_Closed=3]="EyeState_Closed",e[e.EyeState_Opening=4]="EyeState_Opening"})(EyeState=EyeState||{});import*as $ from"./cubismeyeblink";(e=>{e.CubismEyeBlink=$.CubismEyeBlink,e.EyeState=$.EyeState})(Live2DCubismFramework=Live2DCubismFramework||{});export{CubismEyeBlink,EyeState,Live2DCubismFramework};