import{ICubismModelSetting}from"./icubismmodelsetting";import{CubismFramework}from"./live2dcubismframework";import{csmVector}from"./type/csmvector";import{CubismJson}from"./utils/cubismjson";var FrequestNode,Live2DCubismFramework;(e=>{e[e.FrequestNode_Groups=0]="FrequestNode_Groups",e[e.FrequestNode_Moc=1]="FrequestNode_Moc",e[e.FrequestNode_Motions=2]="FrequestNode_Motions",e[e.FrequestNode_Expressions=3]="FrequestNode_Expressions",e[e.FrequestNode_Textures=4]="FrequestNode_Textures",e[e.FrequestNode_Physics=5]="FrequestNode_Physics",e[e.FrequestNode_Pose=6]="FrequestNode_Pose",e[e.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"})(FrequestNode=FrequestNode||{});class CubismModelSettingJson extends ICubismModelSetting{constructor(e,t){super(),this.version="Version",this.fileReferences="FileReferences",this.groups="Groups",this.layout="Layout",this.hitAreas="HitAreas",this.moc="Moc",this.textures="Textures",this.physics="Physics",this.pose="Pose",this.expressions="Expressions",this.motions="Motions",this.userData="UserData",this.name="Name",this.filePath="File",this.id="Id",this.ids="Ids",this.target="Target",this.idle="Idle",this.tapBody="TapBody",this.pinchIn="PinchIn",this.pinchOut="PinchOut",this.shake="Shake",this.flickHead="FlickHead",this.parameter="Parameter",this.soundPath="Sound",this.fadeInTime="FadeInTime",this.fadeOutTime="FadeOutTime",this.centerX="CenterX",this.centerY="CenterY",this.x="X",this.y="Y",this.width="Width",this.height="Height",this.lipSync="LipSync",this.eyeBlink="EyeBlink",this.initParameter="init_param",this.initPartsVisible="init_parts_visible",this.val="val",this._json=CubismJson.create(e,t),this.getJson()&&(this._jsonValue=new csmVector,this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.groups)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.moc)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.motions)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.expressions)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.textures)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.physics)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.pose)),this._jsonValue.pushBack(this.getJson().getRoot().getValueByString(this.hitAreas)))}release(){CubismJson.delete(this._json),this._jsonValue=null}getJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize():0}getTextureDirectory(){var t=this._jsonValue.at(FrequestNode.FrequestNode_Textures).getValueByIndex(0).getRawString().split("/"),s=t.length-1;let i="";for(let e=0;e<s;e++)i+=t[e],e<s-1&&(i+="/");return i}getTextureFileName(e){return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getValueByIndex(e).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize():0}getHitAreaId(e){return CubismFramework.getIdManager().getId(this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getValueByIndex(e).getValueByString(this.id).getRawString())}getHitAreaName(e){return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getValueByIndex(e).getValueByString(this.name).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize():0}getExpressionName(e){return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getValueByIndex(e).getValueByString(this.name).getRawString()}getExpressionFileName(e){return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getValueByIndex(e).getValueByString(this.filePath).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getKeys().getSize():0}getMotionGroupName(e){return this.isExistMotionGroups()?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getKeys().at(e):null}getMotionCount(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getSize():0}getMotionFileName(e,t){return this.isExistMotionGroupName(e)?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.filePath).getRawString():""}getMotionSoundFileName(e,t){return this.isExistMotionSoundFile(e,t)?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.soundPath).getRawString():""}getMotionFadeInTimeValue(e,t){return this.isExistMotionFadeIn(e,t)?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeInTime).toFloat():-1}getMotionFadeOutTimeValue(e,t){return this.isExistMotionFadeOut(e,t)?this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeOutTime).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.userData).getRawString():""}getLayoutMap(e){var t=this.getJson().getRoot().getValueByString(this.layout).getMap();if(null==t)return!1;let s=!1;for(var i=t.begin();i.notEqual(t.end());i.preIncrement())e.setValue(i.ptr().first,i.ptr().second.toFloat()),s=!0;return s}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let t=0;for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();e++){var s=this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e);if(!s.isNull()&&!s.isError()&&s.getValueByString(this.name).getRawString()==this.eyeBlink){t=s.getValueByString(this.ids).getVector().getSize();break}}return t}getEyeBlinkParameterId(t){if(this.isExistEyeBlinkParameters())for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();e++){var s=this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e);if(!s.isNull()&&!s.isError()&&s.getValueByString(this.name).getRawString()==this.eyeBlink)return CubismFramework.getIdManager().getId(s.getValueByString(this.ids).getValueByIndex(t).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let t=0;for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();e++){var s=this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e);if(!s.isNull()&&!s.isError()&&s.getValueByString(this.name).getRawString()==this.lipSync){t=s.getValueByString(this.ids).getVector().getSize();break}}return t}getLipSyncParameterId(t){if(this.isExistLipSyncParameters())for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();e++){var s=this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e);if(!s.isNull()&&!s.isError()&&s.getValueByString(this.name).getRawString()==this.lipSync)return CubismFramework.getIdManager().getId(s.getValueByString(this.ids).getValueByIndex(t).getRawString())}return null}isExistModelFile(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Moc);return!e.isNull()&&!e.isError()}isExistTextureFiles(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Textures);return!e.isNull()&&!e.isError()}isExistHitAreas(){var e=this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);return!e.isNull()&&!e.isError()}isExistPhysicsFile(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Physics);return!e.isNull()&&!e.isError()}isExistPoseFile(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Pose);return!e.isNull()&&!e.isError()}isExistExpressionFile(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Expressions);return!e.isNull()&&!e.isError()}isExistMotionGroups(){var e=this._jsonValue.at(FrequestNode.FrequestNode_Motions);return!e.isNull()&&!e.isError()}isExistMotionGroupName(e){e=this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e);return!e.isNull()&&!e.isError()}isExistMotionSoundFile(e,t){e=this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.soundPath);return!e.isNull()&&!e.isError()}isExistMotionFadeIn(e,t){e=this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeInTime);return!e.isNull()&&!e.isError()}isExistMotionFadeOut(e,t){e=this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(this.fadeOutTime);return!e.isNull()&&!e.isError()}isExistUserDataFile(){var e=this.getJson().getRoot().getValueByString(this.fileReferences).getValueByString(this.userData);return!e.isNull()&&!e.isError()}isExistEyeBlinkParameters(){if(!this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull()&&!this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError())for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e).getValueByString(this.name).getRawString()==this.eyeBlink)return!0;return!1}isExistLipSyncParameters(){if(!this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull()&&!this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError())for(let e=0;e<this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(e).getValueByString(this.name).getRawString()==this.lipSync)return!0;return!1}}import*as $ from"./cubismmodelsettingjson";(e=>{e.CubismModelSettingJson=$.CubismModelSettingJson,e.FrequestNode=$.FrequestNode})(Live2DCubismFramework=Live2DCubismFramework||{});export{FrequestNode,CubismModelSettingJson,Live2DCubismFramework};