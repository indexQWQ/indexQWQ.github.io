import{randomSelection}from"./utils.js";let messageTimer=null;function showMessage(t,s,r,e=!0){let i=parseInt(sessionStorage.getItem("waifu-message-priority"),10);if(isNaN(i)&&(i=0),!(!t||e&&i>r||!e&&i>=r)){messageTimer&&(clearTimeout(messageTimer),messageTimer=null),t=randomSelection(t),sessionStorage.setItem("waifu-message-priority",String(r));let e=document.getElementById("waifu-tips");e.innerHTML=t,e.classList.add("waifu-tips-active"),messageTimer=setTimeout(()=>{sessionStorage.removeItem("waifu-message-priority"),e.classList.remove("waifu-tips-active")},s)}}function welcomeMessage(s,e,t){if("/"===location.pathname)for(let{hour:e,text:t}of s){var r=new Date,i=e.split("-")[0],a=e.split("-")[1]||i;if(Number(i)<=r.getHours()&&r.getHours()<=Number(a))return t}if(!e)return"";let n=i18n(e,document.title);return""===document.referrer||!t||(s=new URL(document.referrer),location.hostname===s.hostname)?n:i18n(t,s.hostname)+"<br>"+n}function i18n(e,...s){return e.replace(/\$(\d+)/g,(e,t)=>{var t=parseInt(t,10)-1;return null!=(t=s[t])?t:""})}export{showMessage,welcomeMessage,i18n};